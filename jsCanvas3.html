<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>jeux 3</title>
    <style>
        #mycanvas {
            border: 2px solid rgb(0, 0, 0);
            background-color: lightyellow;
            
        }
        
        body{
            background-color: lightgrey;
        }
    </style>
</head>
<body onload="startgame()" onkeydown="keeey(event)" onkeyup="stop()"> 
    
    <canvas id="mycanvas">

    </canvas>
    <script>
        var carree;
        function startgame(params) {
           mygamearea.start();
           carree =  new piece(150,40,50,50,"red"); 
        }

        var mygamearea = {
            canvas : document.getElementById("mycanvas"),
            start : function (params) { 
                this.canvas.width = 500;
                this.canvas.height = 400;   
                this.context = this.canvas.getContext("2d"); 
                this.interval = setInterval(move,20);
                
            },
            clear : function (params) {
                this.context.clearRect(0,0,this.canvas.width,this.canvas.height);
            }
         


        }
        function piece(x,y,width,height,color) {
            this.x = x;
            this.speed = 0;
            this.ralentir = 0.2;
            this.y = y;
            this.angle = 90 * Math.PI /180;
            this.width = width ;
            this.height = height;
            this.degree = 0;
            var ctx = mygamearea.context;
            var img = document.createElement("img");
            img.src = "Voiture.jpg";
            
            this.update = function (params) {
                ctx.save();
               ctx.translate(this.x,this.y);
               ctx.rotate(this.angle);
               ctx.fillStyle = color;
             //  ctx.fillRect(this.width / -2,this.height / -2,this.width,this.height); 
              ctx.drawImage(img,this.width / -2,this.height / -2,this.width,this.height);
               ctx.restore();
            },
            this.newPos = function (params) {
                this.angle += this.degree * Math.PI / 180;
                this.x += this.speed * Math.sin(this.angle);
                this.y -= this.speed * Math.cos(this.angle); 
            }
           
           
            
        }
        function stop(params) {
              carree.speed = (carree.speed * carree.ralentir);
              carree.degree = 0;
        }


        function move(params) {
            
            mygamearea.clear();
           
            carree.newPos();
            carree.update();
        }

        function keeey(event) {
            var x= event.key;
            if (x == 4) { carree.degree = -1; }
            if (x == 6) { carree.degree = 1; }
            if (x == 8 || x== "w" ) {carree.speed += 0.2; }    
            if (x == 5 || x== "s") {carree.speed -= 0.2; }
            if (x == " ") {carree.speed = 0;}
        }
     
        
    </script>
    
</body>

</html>