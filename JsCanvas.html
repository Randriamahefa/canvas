<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeux avec canvas et javaScript</title>


    <style>
        canvas {
            border: 2px solid rgb(0, 0, 0);
            background-color: lightyellow;
            
        }
        
        body{
            background-color: lightgrey;
        }
    </style>
</head>
<body  onkeydown="keeey(event)" onload="startgame()">
    <button type="button" id="btnpause">Pause</button>

<canvas id="mycanvas" width="900" height="600px" >  </canvas>

   <script>
   const canvas = document.getElementById("mycanvas"),
         ctx = canvas.getContext("2d");
   let  gamepiece,gamearea,obstacle;

 
  
        

        function startgame(){
            gamearea.start();
            gamepiece = new piece(50,canvas.height - 69,140,70,"lapin.png","image");
          

         }
        
 gamearea = {
       start : function (params) {
           var interval = setInterval(lets,20); 
       },
       clear : function (params) {
           ctx.clearRect(0,0,canvas.width,canvas.height);
       }
        
    }

         function piece(x,y,width,height,color,type) {
             this.type = type;
             this.x = x;
             this.maxy = 300;
             this.speedy =0;
             this.gravity = 0;
             this.speedgravity = 0;
             this.y = y;
             this.width = width;
             this.height = height;
             this.color = color;
             this.update = function (params) {
                if (type == "image") {
                    this.image = new Image();
                    this.image.src = color;
                    ctx.drawImage(this.image,this.x,this.y,this.width,this.height);
                }  
                 else {
                      ctx.fillStyle = this.color;
                      ctx.fillRect(this.x,this.y,this.width,this.height);  
                }
                  
                    
             }
             this.newpos = function (params) {
                 this.speedgravity += this.gravity;
                 this.y += this.speedgravity;
                if (this.y < 400) {
                    this.gravity = 0.9;
                }
                 if (gamepiece.y > (canvas.height - 69)) {
                     gamepiece.y = canvas.height - 69;
                 }
             
                 
             }
              
         
         }

         function lets(params) {
                 gamearea.clear();
                 gamepiece.newpos();
                 gamepiece.update();


         }

         document.getElementById("btnpause").addEventListener("click", function (params) {
                        alert("Pause");
                    })

         function keeey(event) {
             var key = event.key;
             if (key == " ") {
                 gamepiece.gravity = -1;

             
               
             }

             

             
             

             }
          
          
   
   </script> 
</body>
</html>